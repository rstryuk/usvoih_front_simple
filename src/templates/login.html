{% extends "base.html" %}


{% block head %}
{% endblock %}

{% block content %}
<script type="text/javascript">
    async function login(username, password) {
        console.log(username)
        console.log(password)
        await fetch('http://stg.usvoih.com:8000/api/v1/auth/jwt/login', {
            method: 'POST',
            headers: {
                'Accept': 'application / json',
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            data:{
                'username': username,
                'password': password
            },
            body: JSON.stringify({ 
                'username': username,
                'password': password 
            })
        })

    }

</script>
<form id="login-form" onsubmit="login(document.getElementById('inpt_username').value, document.getElementById('inpt_password').value)">
    <div id="div_username" style="margin: 3px;">
        <label id="lbl-username">Username</label>
        <input type="text" name="username" id="username" style="border: 1px solid #625656; border-radius: 15px;">
    </div>
    <div id="div_password" style="margin: 3px;">
        <label id="lbl-password">Password</label>
        <input type="password" iname="password" id="password" style="border: 1px solid #625656; border-radius: 15px;" placeholder="********">
    </div>
    <div id="form-buttons">
        <input type='button' value="Cancel" onclick="location.assign('/index')">
        <input type='submit' value="OK" onclick=form.submit()>
    </div>
    

</form>
<label id="lbl-password">Callback</label>
<script async src="https://telegram.org/js/telegram-widget.js?21" data-telegram-login="U_Svoih_bot" data-size="medium"
    data-userpic="false" data-radius="7" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script type="text/javascript">
    function onTelegramAuth(user) {
        alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
    }
</script>

<label id="lbl-password">Redirect</label>
<script async src="https://telegram.org/js/telegram-widget.js?21" data-telegram-login="U_Svoih_bot" data-size="medium"
    data-userpic="false" data-radius="7" data-auth-url="https://usvoih-front-simple.onrender.com/me"
    data-request-access="write">
</script>

{% endblock %}